"use strict";(self["webpackChunkrecord_app"]=self["webpackChunkrecord_app"]||[]).push([[6],{7006:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Pe});var r=n(3673),o=n(2323);const i=(0,r.Uk)(" Sound Memos "),l={target:"_blank",href:""},a=(0,r._)("span",null,"All your records",-1),c={id:"sound-list"},u=(0,r._)("span",{class:"q-ml-sm"},"Turn off your ads block please...",-1);function s(e,t,n,s,d,f){const m=(0,r.up)("q-btn"),p=(0,r.up)("q-toolbar-title"),b=(0,r.up)("q-toolbar"),h=(0,r.up)("q-header"),w=(0,r.up)("q-item-label"),v=(0,r.up)("ListSoundItem"),g=(0,r.up)("q-list"),y=(0,r.up)("q-drawer"),C=(0,r.up)("editor-component"),k=(0,r.up)("q-page-container"),O=(0,r.up)("q-layout"),_=(0,r.up)("q-avatar"),S=(0,r.up)("q-card-section"),P=(0,r.up)("q-card-actions"),I=(0,r.up)("q-card"),W=(0,r.up)("q-dialog"),j=(0,r.Q2)("close-popup");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(O,{view:"lHh Lpr lFf",style:{cursor:"default"}},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{elevated:""},{default:(0,r.w5)((()=>[(0,r.Wm)(b,null,{default:(0,r.w5)((()=>[(0,r.Wm)(m,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[i])),_:1}),(0,r._)("a",l,"v."+(0,o.zw)(e.version),1)])),_:1})])),_:1}),(0,r.Wm)(y,{modelValue:e.leftDrawerOpen,"onUpdate:modelValue":t[0]||(t[0]=t=>e.leftDrawerOpen=t),"show-if-above":"",bordered:""},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{id:"all-your-record-wrapper"},{default:(0,r.w5)((()=>[(0,r.Wm)(w,{header:"",id:"all-your-record-header"},{default:(0,r.w5)((()=>[a,(0,r.Wm)(m,{class:"record-btn",size:"md",unelevated:"",icon:"system_update_alt",onClick:e.downloadAllSound},null,8,["onClick"])])),_:1}),(0,r._)("div",c,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.listSound,(t=>((0,r.wg)(),(0,r.j4)(v,(0,r.dG)({key:t.name},t,{onSelected:e.selectedSoundMemos,onDownloadSound:e.downloadOneSound}),null,16,["onSelected","onDownloadSound"])))),128))]),(0,r.Wm)(w,{footer:"",id:"footer-wrapper"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{color:"black",icon:"delete",label:"Delete",unelevated:"",onClick:e.deleteASound},null,8,["onClick"]),(0,r.Wm)(m,{color:"red",icon:"add",label:"Add New",unelevated:"",onClick:e.createNewRecord},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.Wm)(k,null,{default:(0,r.w5)((()=>[(0,r.Wm)(C,{active:""})])),_:1})])),_:1}),(0,r.Wm)(W,{modelValue:e.confirm,"onUpdate:modelValue":t[1]||(t[1]=t=>e.confirm=t),persistent:""},{default:(0,r.w5)((()=>[(0,r.Wm)(I,null,{default:(0,r.w5)((()=>[(0,r.Wm)(S,{class:"row items-center"},{default:(0,r.w5)((()=>[(0,r.Wm)(_,{icon:"strikethrough_s",color:"primary","text-color":"white"}),u])),_:1}),(0,r.Wm)(P,{align:"right"},{default:(0,r.w5)((()=>[(0,r.wy)((0,r.Wm)(m,{flat:"",label:"Ok",color:"primary",onClick:e.checkAdsBlock},null,8,["onClick"]),[[j]]),(0,r.wy)((0,r.Wm)(m,{flat:"",label:"Yes",color:"primary",onClick:e.checkAdsBlock},null,8,["onClick"]),[[j]])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var d=n(4431);n(71);const f={class:"editor-wrapper"},m={class:"title"},p=(0,r._)("div",{id:"waveform-timeline"},null,-1),b=(0,r._)("div",{id:"waveform"},null,-1),h={id:"wave-minimap",ref:"waveMinimap"},w={class:"info"},v={class:"time"},g={style:{position:"relative"}},y={class:"file-name"},C=(0,r._)("div",{class:"date-name"},[(0,r._)("p",null,"2021/10/24")],-1),k={class:"controls"},O={ref:"player",controls:"",style:{display:"none"}};function _(e,t,n,i,l,a){const c=(0,r.up)("q-btn"),u=(0,r.up)("q-input");return(0,r.wg)(),(0,r.iD)("div",f,[(0,r._)("h2",m,(0,o.zw)(e.title),1),(0,r._)("div",{onClick:t[0]||(t[0]=(...t)=>e.updateCurrentTime&&e.updateCurrentTime(...t))},[p,b,(0,r._)("div",h,null,512)]),(0,r._)("div",w,[(0,r._)("div",v,[(0,r._)("h4",null,[(0,r._)("span",g,[(0,r.Wm)(c,{onClick:e.onClickPlay,unelevated:"",icon:e.playButtonIcn,disable:"pause"===e.recordIcon||"mic"===e.recordIcon&&0==e.audioPlaySet.size,padding:"none",round:"",size:"xs",style:{"font-size":"1.75rem",padding:"0px","min-width":"0px","min-height":"0px",position:"absolute",margin:"0px",left:"-55px",top:"-4px"}},null,8,["onClick","icon","disable"])]),(0,r.Uk)(" "+(0,o.zw)(e.currentTime),1)])]),(0,r._)("div",y,[(0,r.Wm)(u,{standout:"",modelValue:e.onOpeningFileName,"onUpdate:modelValue":t[1]||(t[1]=t=>e.onOpeningFileName=t),dense:!0,style:{width:"400px",margin:"auto","font-size":"1.75rem"}},null,8,["modelValue"])]),C]),(0,r._)("div",k,[(0,r.Wm)(c,{outline:"","no-caps":"",class:"clear-btn",label:"Clear",onClick:e.onClickClear,disable:"pause"===e.recordIcon||"PLAYING"===e.title},null,8,["onClick","disable"]),(0,r.Wm)(c,{class:"record-btn",size:"lg",unelevated:"",round:"",icon:e.recordIcon,onClick:e.onClickRecord},null,8,["icon","onClick"]),(0,r.Wm)(c,{outline:"","no-caps":"",class:"done-btn",label:"Done",onClick:e.onClickDone,disable:"pause"===e.recordIcon},null,8,["onClick","disable"])]),(0,r._)("audio",O,null,512)])}var S=n(5777),P=n(4640),I=n(3221),W=n(7201),j=n(3892),D=n.n(j),T=n(3139),A=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function l(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):o(e.value).then(l,a)}c((r=r.apply(e,t||[])).next())}))};const R=11921;let E;function N(){return E=(0,W.X3)("sound-memos",R,{upgrade(e){const t=e;t.createObjectStore("sound-db",{keyPath:"id"})},blocked(){},blocking(){},terminated(){}}),E}function Z(){return A(this,void 0,void 0,(function*(){return N()}))}function q(e){return A(this,void 0,void 0,(function*(){return(yield E).put("sound-db",e)}))}function x(){return A(this,void 0,void 0,(function*(){return(yield E).getAll("sound-db")}))}function B(e){return A(this,void 0,void 0,(function*(){return(yield E).get("sound-db",e)}))}function Q(e){return A(this,void 0,void 0,(function*(){return(yield E).delete("sound-db",e)}))}function L(){return A(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{x().then((t=>{const n=new(D());t.forEach(((e,t)=>{n.file(`${t}.${e.name}.wav`,e.blob)})),n.generateAsync({type:"blob"}).then((function(t){(0,T.saveAs)(t,"download.zip"),e(!0)}))}))}))}))}function z(e){return A(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{B(e).then((e=>{(0,T.saveAs)(e.blob,`${e.name}.wav`),t(!0)}))}))}))}var H=n(9574);class F{constructor(){Object.defineProperty(this,"todos",{enumerable:!0,configurable:!0,writable:!0,value:(0,S.vg)({default:()=>[]})}),Object.defineProperty(this,"meta",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"active",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}}class M extends(S.w3["with"](F)){constructor(){super(...arguments),Object.defineProperty(this,"clickCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"recordIcon",{enumerable:!0,configurable:!0,writable:!0,value:"mic"}),Object.defineProperty(this,"playButtonIcn",{enumerable:!0,configurable:!0,writable:!0,value:"play_arrow"}),Object.defineProperty(this,"currentTime",{enumerable:!0,configurable:!0,writable:!0,value:"00:00.0"}),Object.defineProperty(this,"endOfRecord",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"wavesurfer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"audioBuffer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"audioPlaySet",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"onOpeningFileName",{enumerable:!0,configurable:!0,writable:!0,value:"New Recording..."}),Object.defineProperty(this,"onOpeningId",{enumerable:!0,configurable:!0,writable:!0,value:(0,H.Z)()}),Object.defineProperty(this,"title",{enumerable:!0,configurable:!0,writable:!0,value:"RECORD"})}mounted(){Z(),this.initWavesurfer(),this.waveSurferEventHandler(),this.emmiterEventHandler()}initWavesurfer(){this.wavesurfer=WaveSurfer.create({container:"#waveform",waveColor:"white",progressColor:"#46f0d4",barRadius:0,barWidth:1,barGap:3,height:200,cursorWidth:2,cursorColor:"#46f0d4",responsive:!0,scrollParent:!0,appendMode:!0,fillParent:!0,autoCenter:!0,barMinHeight:1,minPxPerSec:30,plugins:[WaveSurfer.timeline.create({container:"#waveform-timeline",fontSize:"14",fillParent:!0,scrollParent:!0,formatTimeCallback:e=>{if(e/60>=1){let t="00"+parseInt(""+e/60,10);e=parseInt(""+e%60,10);let n=`00${e}`.slice(-2);return"".concat(t.slice(-2),":").concat(n)}let t="00"+(Math.round(1e3*e)/1e3).toString();return`00:${t.slice(-2)}`}}),WaveSurfer.minimap.create({container:"#wave-minimap",waveColor:"#777",progressColor:"white",height:50}),WaveSurfer.microphone.create({})]})}emmiterEventHandler(){const e=this;P.emitter.on("SELECT_SOUND",(t=>{e.onClickClear(),this.title="PLAYING",this.playButtonIcn="play_arrow",B(t).then((t=>{console.log(t),e.endOfRecord=t.time,e.audioPlaySet.add(t.id),e.onOpeningFileName=t.name,e.wavesurfer.loadBlob(t.blob)}))})),P.emitter.on("CREATE_NEW",(()=>{e.onClickClear(),e.title="RECORD",e.onOpeningFileName="New Recording..."}))}waveSurferEventHandler(){const e=this;this.wavesurfer.on("ready",(function(){})),this.wavesurfer.on("audioprocess",(function(){let t=e.wavesurfer.getCurrentTime();e.currentTime=e.formatTime(t),console.log(t,e.endOfRecord),t+.1>=e.endOfRecord&&(e.playButtonIcn="play_arrow")})),this.wavesurfer.on("seek",(function(){e.currentTime=e.formatTime(e.wavesurfer.getCurrentTime())})),this.wavesurfer.microphone.on("deviceReady",(function(e){console.log("Device ready!",e)})),this.wavesurfer.microphone.on("deviceError",(function(e){console.warn("Device error: "+e)})),P.emitter.on("TAB_CHANGE",(t=>{setTimeout((()=>{e.wavesurfer.minimap._onZoom(0),setTimeout((()=>{e.wavesurfer.zoom(0)}),100)}),100)}))}formatTime(e){let t=e.toFixed(1);if(e/60>=1){let n=parseInt(""+e/60,10),r=+t-60*n,o=`0${r.toFixed(1)}`.slice(-4);return"00".concat(n.toString()).slice(-2).concat(":",o)}let n="0"+t;return`00:${n.slice(-4)}`}updateCurrentTime(){this.currentTime=this.formatTime(this.wavesurfer.getCurrentTime())}onClickClear(){this.recordIcon,this.wavesurfer.minimap.empty(),this.wavesurfer.stop(),this.wavesurfer.empty(),this.wavesurfer.destroy(),this.initWavesurfer(),this.waveSurferEventHandler(),this.endOfRecord=0}onClickPlay(){console.log("onClickPlay"),"play_arrow"===this.playButtonIcn?(this.playButtonIcn="stop",this.wavesurfer.play()):(this.playButtonIcn="play_arrow",this.wavesurfer.stop(),this.wavesurfer.seekAndCenter(1))}onClickRecord(){if(this.title="RECORD",this.onOpeningId&&""!==this.onOpeningId.trim()||(this.onOpeningId=(0,H.Z)()),"mic"===this.recordIcon){this.wavesurfer.microphone.micContext.resume(),this.wavesurfer.microphone.togglePlay(),this.audioPlaySet.has(this.onOpeningFileName)||this.audioPlaySet.add(this.onOpeningFileName),this.recordIcon="pause";let e=this.wavesurfer.getCurrentTime();e!==this.endOfRecord&&this.handleSlice(e)}else this.wavesurfer.microphone.togglePlay(),this.recordIcon="mic",this.endOfRecord=this.wavesurfer.getCurrentTime()}handleSlice(e){let t;(0,I.audioBufferSlice)(this.wavesurfer.backend.buffer,0,1e3*e,(function(e,n){e?console.error(e):t=n})),this.wavesurfer.backend.buffer=t}onClickDone(){const e=this;if(this.wavesurfer.microphone.stop(),this.recordIcon="mic",this.audioBuffer=this.wavesurfer.backend.buffer,this.audioBuffer){var t=new Worker("libs/recorderWorker.js");t.postMessage({command:"init",config:{sampleRate:48e3,numChannels:1}}),t.onmessage=function(t){var n=t.data;q({id:e.onOpeningId,name:e.onOpeningFileName,time:e.endOfRecord,blob:n,date:+new Date}),e.onOpeningId="",P.emitter.emit("LIST_CHANGE")},t.postMessage({command:"record",buffer:[this.audioBuffer.getChannelData(0)]}),t.postMessage({command:"exportWAV",type:"audio/wav"})}this.onClickClear()}}var V=n(6114),$=n(6805),G=n(7518),U=n.n(G);M.render=_;const Y=M;U()(M,"components",{QBtn:V.Z,QInput:$.Z});const K={style:{display:"inline-block",width:"50%"}},X={style:{display:"inline-block",width:"50%","text-align":"right"}};function J(e,t,n,i,l,a){const c=(0,r.up)("q-btn"),u=(0,r.up)("q-item-section"),s=(0,r.up)("q-item-label"),d=(0,r.up)("q-item");return(0,r.wg)(),(0,r.j4)(d,{tag:"a",target:"_blank",onClick:e.selectAnItem,style:(0,o.j5)(e.selected?{backgroundColor:"#bce5f2"}:""),select:e.selected},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{avatar:"",class:"sound-item"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{size:"md",unelevated:"",flat:"",color:"#757575",round:"",icon:e.actionIcon,onClick:e.downloadSound},null,8,["icon","onClick"])])),_:1}),(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Wm)(s,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,o.zw)(e.name),1)])),_:1}),(0,r.Wm)(s,{caption:"",style:{height:"1rem"}},{default:(0,r.w5)((()=>[(0,r._)("div",K,(0,o.zw)(e.timestampToDate(e.date)),1),(0,r._)("div",X,(0,o.zw)(Number(e.time).toFixed(3)),1)])),_:1})])),_:1})])),_:1},8,["onClick","style","select"])}var ee=function(e,t,n,r){var o,i=arguments.length,l=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(l=(i<3?o(l):i>3?o(t,n,l):o(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l};class te{constructor(){Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:(0,S.vg)({default:"#"})}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:(0,S.vg)({default:"sound_memos"})}),Object.defineProperty(this,"selected",{enumerable:!0,configurable:!0,writable:!0,value:(0,S.vg)({default:!1})}),Object.defineProperty(this,"date",{enumerable:!0,configurable:!0,writable:!0,value:(0,S.vg)({default:0})}),Object.defineProperty(this,"time",{enumerable:!0,configurable:!0,writable:!0,value:(0,S.vg)({default:"#"})})}}let ne=class extends(S.w3["with"](te)){constructor(){super(...arguments),Object.defineProperty(this,"actionIcon",{enumerable:!0,configurable:!0,writable:!0,value:"download"})}selectAnItem(){this.$emit("selected",this.id)}downloadSound(e){this.$emit("downloadSound",this.id),e.stopImmediatePropagation()}timestampToDate(e){return new Date(e).toISOString().substring(0,10)}};ne=ee([(0,S.Ei)({})],ne);const re=ne;var oe=n(3414),ie=n(2035),le=n(2350);re.render=J;const ae=re;U()(re,"components",{QItem:oe.Z,QItemSection:ie.Z,QBtn:V.Z,QItemLabel:le.Z});var ce=function(e,t,n,r){var o,i=arguments.length,l=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(l=(i<3?o(l):i>3?o(t,n,l):o(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l};const ue=112521,se="https://github.com/nhvu95/soundmemos-vuejs";let de=class extends S.w3{constructor(){super(...arguments),Object.defineProperty(this,"leftDrawerOpen",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:ue}),Object.defineProperty(this,"source",{enumerable:!0,configurable:!0,writable:!0,value:se}),Object.defineProperty(this,"listSound",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"selectedId",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"confirm",{enumerable:!0,configurable:!0,writable:!0,value:!1})}mounted(){this.updateSoundList(),P.emitter.on("LIST_CHANGE",(()=>{this.updateSoundList()})),(0,d.detectAnyAdblocker)().then((e=>{e&&(this.confirm=!0)}))}checkAdsBlock(){window.location.reload()}toggleLeftDrawer(){this.leftDrawerOpen=!this.leftDrawerOpen,P.emitter.emit("TAB_CHANGE",this.leftDrawerOpen)}selectedSoundMemos(e){this.listSound.forEach((t=>{t.id===e?(t.selected=!0,this.selectedId=e,P.emitter.emit("SELECT_SOUND",t.id)):t.selected=!1}))}updateSoundList(){x().then((e=>{this.listSound=e}))}downloadAllSound(){L().then((()=>{console.log("Download Success")}))}downloadOneSound(e){z(e).then((()=>{console.log("Download scucess")}))}deleteASound(){Q(this.selectedId).then((()=>{this.updateSoundList()}))}createNewRecord(){P.emitter.emit("CREATE_NEW",!0),this.listSound.forEach((e=>{e.selected=!1}))}};de=ce([(0,S.Ei)({components:{ListSoundItem:ae,EditorComponent:Y}})],de);const fe=de;var me=n(3066),pe=n(3812),be=n(9570),he=n(3747),we=n(7317),ve=n(7011),ge=n(2652),ye=n(5548),Ce=n(151),ke=n(5589),Oe=n(5096),_e=n(9367),Se=n(677);fe.render=s;const Pe=fe;U()(fe,"components",{QLayout:me.Z,QHeader:pe.Z,QToolbar:be.Z,QBtn:V.Z,QToolbarTitle:he.Z,QDrawer:we.Z,QList:ve.Z,QItemLabel:le.Z,QPageContainer:ge.Z,QDialog:ye.Z,QCard:Ce.Z,QCardSection:ke.Z,QAvatar:Oe.Z,QCardActions:_e.Z}),U()(fe,"directives",{ClosePopup:Se.Z})}}]);